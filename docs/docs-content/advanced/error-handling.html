<h1 id="error-handling-api-validation-">Error handling API (Validation)</h1>
<p>In the previous section we&#39;ve seen how to add custom sanitization filters. Those same filters can be used to introduce validation for your fields. </p>
<p>When a validation error occurs, the saving process stops with no changes made to the database. Error messages will also display within the options panel.</p>
<p>The following example, we&#39;re using the same filter we&#39;ve used before but we&#39;ve now introduced a very simple validation method and added an error with the <code>$errors</code> variable. This variable holds the WP_Error class object.</p>
<pre><code class="lang-php"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sample_custom_sanitization</span><span class="hljs-params">( $input, $errors, $setting )</span> </span>{

    <span class="hljs-keyword">if</span>( $input !== <span class="hljs-string">'test'</span> ) {
        $errors-&gt;add( $setting[<span class="hljs-string">'id'</span>], <span class="hljs-string">'The error message goes here'</span>, <span class="hljs-keyword">array</span>(
            <span class="hljs-string">'status'</span> =&gt; <span class="hljs-number">422</span>,
            <span class="hljs-string">'label'</span> =&gt; $setting[<span class="hljs-string">'name'</span>]
        ) );
    }

    <span class="hljs-keyword">return</span> trim( wp_strip_all_tags( $input, <span class="hljs-keyword">true</span> ) );
}
add_filter( <span class="hljs-string">'sample2_settings_sanitize_text'</span>, <span class="hljs-string">'sample_custom_sanitization'</span>, <span class="hljs-number">3</span>, <span class="hljs-number">10</span> );
</code></pre>
<p>When using the <code>add</code> method, the first parameter is the ID of the setting. The second parameter is the error message that will be displayed into your options panel. The third parameter is an array containing additional information about the error:</p>
<ul>
<li>status: must always be set to 422, any other error code will not be recognized by the API.</li>
<li>label: is the name of the field that will appear in the message at the top of the screen.</li>
</ul>
<p><stencil-route-link url="/docs/custom-fields" router="#router" custom="true">
  <button id="introButton">
    Next
  </button>
</stencil-route-link></p>
